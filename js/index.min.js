var windowWidth=parseInt($(window).width()),mobile=parseInt($(window).width())<768;HeaderLoad=(()=>{let e=new XMLHttpRequest;e.open("GET","header.html",!0),e.onreadystatechange=function(){4===this.readyState&&200===this.status&&(document.getElementById("to-include").innerHTML=this.responseText)},e.send()}),TooltipHandler=(()=>{if(mobile){let e=$("#mobile-tooltip"),o=$(".tooltip .tooltip__button"),t=!1;$.map(o,o=>{$(o).on("click",()=>{t?(e.removeClass("mobile-tooltip--open"),t=!1):(e.addClass("mobile-tooltip--open"),e.offset({top:$(o).offset().top+20,left:30}),setTimeout(()=>{t=!0},1))})}),$(window).on("click",l=>{l.target!=o.get(0)&&t&&(e.removeClass("mobile-tooltip--open"),t=!1)})}else{let e=$(".td-con"),o=[],t=$("#mouseover-tooltip");t.fadeOut(0),$.map(e,(e,l)=>{o.push(e.innerHTML),new Dotdotdot(e),$(e).hasClass("ddd-truncated")&&$(e).hover(()=>{t.fadeIn(50),t.offset({left:$(e).offset().left-5,top:$(e).offset().top}),t.html(o[l])},()=>{t.fadeOut(50)})})}}),PlusHandler=(()=>{let e=$(".blogger"),o=new Array(e.length).fill(!1);OpenReviews=((e,t,l)=>{o[t]?($(e).removeClass("blogger--open"),o[t]=!1):(l?($(e).addClass("blogger--loading"),setTimeout(()=>{$(e).removeClass("blogger--loading"),$(e).addClass("blogger--open")},1e3)):($(e).removeClass("blogger--loading"),$(e).addClass("blogger--open")),o[t]=!0)}),$.map(e,(e,t)=>{$(e).find(".table-blogger__open-copies").on("click",()=>{OpenReviews(e,t,!0)}),$(e).find(".review-control__open").on("click",l=>{l.preventDefault(),OpenReviews(e,t,!1),o[t]?$(e).find(".review-control__open").html("Скрыть"):$(e).find(".review-control__open").html("Все отзывы на блогера")})})}),SetTableWidth=(()=>{if(!mobile){let o=[];for(var e=1;e<14;e++)o.push($(".table-col--"+e.toString()));let t=Array(o.length).fill(0);$.map(o,(e,o)=>{$.map($(e),e=>{parseInt($(e).css("width"))>t[o]&&(t[o]=parseInt($(e).width()))})}),$.map(o,(e,o)=>{$(e).css({"max-width":t[o]+"px","min-width":t[o]+"px"})})}}),CloseBloggersReviews=(()=>{let e=$(".blogger");$.map(e,e=>{$(e).hasClass("blogger--open")&&$(e).removeClass("blogger--open")})}),ReviewsHandler=(()=>{let e=$(".table-blogger__reviews-button"),o=$(".review-control__full"),t=$(".blogger-review");$.map(e,(e,o)=>{$(e).on("click",e=>{e.preventDefault(),$(t[o]).hasClass("blogger-review--open")?$(t[o]).removeClass("blogger-review--open"):$(t[o]).addClass("blogger-review--open")})}),$.map(o,(e,o)=>{$(e).on("click",l=>{l.preventDefault(),$(t[o]).hasClass("blogger-review--open")?($(t[o]).removeClass("blogger-review--open"),$(e).removeClass("review-control__full--open")):($(t[o]).addClass("blogger-review--open"),$(e).addClass("review-control__full--open"))})})}),SwitchMode=(()=>{let e=$(".left-part .buttons .button"),o=$(".full-table .rectangle-block-wrapper .rectangle-block");$(e[0]).on("click",()=>{o.hasClass("mode--commerce")&&(o.removeClass("mode--commerce"),o.addClass("mode--blogger"))}),$(e[1]).on("click",()=>{o.hasClass("mode--blogger")&&(o.removeClass("mode--blogger"),o.addClass("mode--commerce"))})}),FilterHandler=(()=>{let e=$("#filter-button"),o=$(".review-wrapper"),t=$("#filter-close-button"),l=!1,s=$("#level"),a=$("#rating"),r=$("#reset-button"),n=$(".review input");FilterWindow=(t=>{t?(e.hasClass("not-visited")&&e.removeClass("not-visited"),o.addClass("review-wrapper--open"),$("body").addClass("scroll-disabled")):(o.removeClass("review-wrapper--open"),$("body").removeClass("scroll-disabled")),l=t}),s.on("input",()=>{a.html(s.val())}),e.on("click",()=>{FilterWindow(!0)}),r.on("click",()=>{$.map(n,e=>{"text"==$(e).attr("type")||"number"==$(e).attr("type")?$(e).val(""):$(e).val("0")}),$.map($(".review .option"),e=>{$(e).hasClass("option--active")&&$(e).removeClass("option--active")}),$.map($(".review .select-wrapper .select"),e=>{$(e).val("0")}),a.html("")}),t.on("click",()=>{FilterWindow(!1)}),$(window).on("click",e=>{l&&100/(windowWidth/e.clientX)>76&&FilterWindow(!1)})}),OptionsHandler=(()=>{let e=$(".option");$.map(e,e=>{$(e).on("click",()=>{$(e).toggleClass("option--active")})})}),$(document).ready(()=>{$.fn.moveIt=function(){$(window);var o=[];$(this).each(function(){o.push(new e($(this)))}),$("[data-scroll-speed]")[0].addEventListener("scroll",function(){var e=$("[data-scroll-speed]").scrollTop();o.forEach(function(o){o.update(e)})},{passive:!0})};var e=function(e){this.el=$(e),this.speed=10*parseInt(this.el.attr("data-scroll-speed"))};e.prototype.update=function(e){$($(".review")[0]).css("transform","translateY("+-500*e/this.speed+"px)")},$(function(){$("[data-scroll-speed]").moveIt()}),HeaderLoad(),PlusHandler(),TooltipHandler(),SetTableWidth(),ReviewsHandler(),SwitchMode(),FilterHandler(),OptionsHandler()});